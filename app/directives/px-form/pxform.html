<form ng-submit="vm.submitHandler()" name="vm.form" novalidate>

<div dir-paginate="record in vm.data | itemsPerPage: vm.options.paginationPageSize"
     total-items="vm.options.totalItems"
     current-page="vm.options.currentPage">

	<div class="panel-body">

    <fieldset ng-repeat="fieldset in vm.fields | filter:{type:'fieldset'}">
      <formly-form model="record"
                   fields="fieldset.fields"
                   form="vm.form"
                   heading="{{fieldset.title}}"
                   active="fieldset.active"
                   disable="fieldset.disabled">
      </formly-form>
    </fieldset>

    <tabset ng-repeat="tabpanel in vm.fields | filter:{type:'tabpanel'}">
      <tab ng-repeat="tab in tabpanel.tabs | filter:{type:'tab'}"
           heading="{{tab.title}}"
           active="tab.active"
           disable="tab.disabled">

          <formly-form
                    model="record"
                    fields="tab.fields"
                    form="vm.form">
          </formly-form>

      </tab>
    </tabset>

	</div>

	<div class="panel-footer clearfix">

    <div class="btn-toolbar">
      <div class="pull-left">
        <div class="btn-group btn-group-md">
          <!-- <button class="btn btn-default" type="button" ng-click="vm.cancelHandler()">
            <em class="glyphicon glyphicon-ban-circle"></em>
            Cancel
          </button> -->
          <button class="btn btn-primary submit-button" type="submit"
              ng-disabled="vm.submitDisabled()">
            <em class="glyphicon glyphicon-ok-sign"></em>
            Save
          </button>
        </div>
      </div>

      <div class="pull-right">
        <div class="btn-group btn-group-md">
          <!-- <button class="btn btn-info" type="button" ng-click="vm.resetHandler({form: form})">
            <em class="glyphicon glyphicon-retweet"></em>
            Reset
          </button> -->
        </div>
      </div>
    </div>

	</div>

</div>

</form>

<div class="panel-footer clearfix">
  <div class="pull-left">
    <select
      ng-model="vm.options.paginationPageSize"
      ng-options="o as o for o in vm.options.paginationPageSizes">
    </select>
    records per page
  </div>
  <dir-pagination-controls
    boundary-links="true"
    template-url="directives/shared/dirPagination.tpl.html">
  </dir-pagination-controls>
</div>
